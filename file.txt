namedJdbcTemplate.query(sqlRuleNationJust, sqlParameterMap,    new RowCallbackHandler() {     private String ctrKey = null;     private String fcKey = null;     @Override     public void processRow(ResultSet rs) throws SQLException {      final RulePresentationCriteria presntCriteria = new RulePresentationCriteria();            setCommonValueToPresentation(presntCriteria, rs);      presntCriteria.setRuleCode(rs.getString(FilingConstants.RULE_CD));            final String currentCtrKey = FilingUtility.generateNationalMapKey(presntCriteria.getCarrier().trim(),         presntCriteria.getTariffCode().trim(), presntCriteria.getRuleCode().trim());            //CTR key already exists in Map      if(currentCtrKey.equalsIgnoreCase(ctrKey)){       //Inner map Key FC also exists       if(presntCriteria.getFcCode().equalsIgnoreCase(fcKey)){        Map<String, List<RulePresentationCriteria>> innerMap = ruleNationJustMap.get(currentCtrKey);        List<RulePresentationCriteria> presntCriteriaList = innerMap.get(presntCriteria.getFcCode());        presntCriteriaList.add(presntCriteria);        ruleNationJustMap.get(currentCtrKey).put(presntCriteria.getFcCode().trim(), presntCriteriaList);       }else{        //CTR key exists but inner map key FC does not exist, create a new one        List<RulePresentationCriteria> presntCriteriaList = new ArrayList<RulePresentationCriteria>();        presntCriteriaList.add(presntCriteria);        ruleNationJustMap.get(currentCtrKey).put(presntCriteria.getFcCode().trim(), presntCriteriaList);        fcKey = presntCriteria.getFcCode();       }      }else{       //CTR key and innerkey both does not exist create new ones       List<RulePresentationCriteria> presntCriteriaList = new ArrayList<RulePresentationCriteria>();       presntCriteriaList.add(presntCriteria);       Map<String, List<RulePresentationCriteria>> innerMap = new HashMap<String, List<RulePresentationCriteria>>();       innerMap.put(presntCriteria.getFcCode().trim(), presntCriteriaList);       ruleNationJustMap.put(currentCtrKey, innerMap);       ctrKey = currentCtrKey;       fcKey = presntCriteria.getFcCode();      }     }    });
